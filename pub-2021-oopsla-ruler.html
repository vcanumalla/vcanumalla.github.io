<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="Zachary Tatlock">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rewrite Rule Inference Using Equality Saturation</title>
  <link rel="icon" href="img/favicon.png">
  <link rel="stylesheet" href="style.css">
  <link rel="canonical" href="https://ztatlock.net/pub-2021-oopsla-ruler.html">
<meta name="description" content="Ruler uses equality saturation and e-graphs to infer rewrite rules, leading to 25x faster synthesis of 5.8x smaller rulesets that match or exceed experts.">

<!-- OpenGraph -->
<meta property="og:url" content="https://ztatlock.net/pub-2021-oopsla-ruler.html">
<meta property="og:type" content="website">
<meta property="og:title" content="Rewrite Rule Inference Using Equality Saturation">
<meta property="og:description" content="Ruler uses equality saturation and e-graphs to infer rewrite rules, leading to 25x faster synthesis of 5.8x smaller rulesets that match or exceed experts.">
<meta property="og:image" content="https://ztatlock.net/pubs/2021-oopsla-ruler/2021-oopsla-ruler-meta.png">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="ztatlock.net">
<meta property="twitter:url" content="https://ztatlock.net/pub-2021-oopsla-ruler.html">
<meta name="twitter:title" content="Rewrite Rule Inference Using Equality Saturation">
<meta name="twitter:description" content="Ruler uses equality saturation and e-graphs to infer rewrite rules, leading to 25x faster synthesis of 5.8x smaller rulesets that match or exceed experts.">
<meta name="twitter:image" content="https://ztatlock.net/pubs/2021-oopsla-ruler/2021-oopsla-ruler-meta.png">
  <script async src="https://analytics.umami.is/script.js" data-website-id="e9f6fa87-a4bb-48ac-84df-b2d190867eb9" data-domains="ztatlock.net"></script>
</head>
<body>
<section id="Rewrite-Rule-Inference-Using-Equality-Saturation">
<h1>Rewrite Rule Inference Using Equality Saturation</h1>
<p><a href="https://cnandi.com/">Chandrakana Nandi</a>,
&nbsp;<a href="https://www.mwillsey.com/">Max Willsey</a>,
&nbsp;<a href="http://amy.zhucchini.ca/">Amy Zhu</a>,
&nbsp;<a href="https://remy.wang/">Yisu Remy Wang</a>,
&nbsp;<a href="https://www.bsaiki.com/">Brett Saiki</a>,
&nbsp;<a href="https://github.com/AdamEAnderson/">Adam Anderson</a>,
&nbsp;<a href="https://homes.cs.washington.edu/~adriana/">Adriana Schulz</a>,
&nbsp;<a href="https://homes.cs.washington.edu/~djg/">Dan Grossman</a>,
&nbsp;<a href="https://ztatlock.net/">Zachary Tatlock</a></p>
<p>Object-Oriented Programming, Systems, Languages &amp; Applications (OOPSLA) 2021<br>
‚òÖ Distinguished Paper</p>
<div class="photo">
<p><a href="pubs/2021-oopsla-ruler/2021-oopsla-ruler.pdf"><img alt="Rewrite Rule Inference Using Equality Saturation" src="pubs/2021-oopsla-ruler/2021-oopsla-ruler-absimg.png"></a></p>
</div>
<ul class="columns columns-8rem">
<li>
<a href="pubs/2021-oopsla-ruler/2021-oopsla-ruler.pdf">paper</a>
</li>
<li>
<a href="https://www.youtube.com/watch?v=5VGTXMgebOo">talk</a>
</li>
<li>
<a href="pubs/2021-oopsla-ruler/2021-oopsla-ruler-slides.pdf">slides</a>
</li>
<li>
<a href="https://github.com/uwplse/ruler">code</a>
</li>
<li>
<a href="https://dl.acm.org/doi/abs/10.1145/3485496">publisher</a>
</li>
<li>
<a href="https://arxiv.org/abs/2108.10436">arXiv</a>
</li>
<li>
<a href="pubs/2021-oopsla-ruler/2021-oopsla-ruler.bib">bib</a>
</li>
</ul>
<section id="Abstract">
<h2>Abstract</h2>
<p>Many compilers, synthesizers, and theorem provers rely on rewrite rules to
simplify expressions or prove equivalences. Developing rewrite rules can be
difficult: rules may be subtly incorrect, profitable rules are easy to miss,
and rulesets must be rechecked or extended whenever semantics are tweaked.
Large rulesets can also be challenging to apply: redundant rules slow down
rule-based search and frustrate debugging. This paper explores how equality
saturation, a promising technique that uses e-graphs to apply rewrite rules,
can also be used to infer rewrite rules. E-graphs can compactly represent the
exponentially large sets of enumerated terms and potential rewrite rules. We
show that equality saturation efficiently shrinks both sets, leading to faster
synthesis of smaller, more general rulesets. We prototyped these strategies in
a tool dubbed Ruler. Compared to a similar tool built on CVC4, Ruler
synthesizes 5.8x smaller rulesets 25x faster without compromising on proving
power. In an end-to-end case study, we show Ruler-synthesized rules which
perform as well as those crafted by domain experts, and addressed a
longstanding issue in a popular open source tool.</p>
</section>
<section id="Talk">
<h2>Talk</h2>
<p>OOPSLA 2021 talk by <a href="https://cnandi.com/">Chandrakana Nandi</a>.</p>
<div class="photo">
<iframe src="https://www.youtube.com/embed/5VGTXMgebOo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>
</section>
<section id="BibTeX">
<h2>BibTeX</h2>
<pre class="bib"><code>@article{2021-oopsla-ruler,
  title        = {Rewrite Rule Inference Using Equality Saturation},
  author       = {Nandi, Chandrakana and Willsey, Max and Zhu, Amy and Wang, Yisu Remy and Saiki, Brett and Anderson, Adam and Schulz, Adriana and Grossman, Dan and Tatlock, Zachary},
  journaltitle = {Proceedings of the ACM on Programming Languages},
  url          = {https://doi.org/10.1145/3485496},
  doi          = {10.1145/3485496},
  number       = {OOPSLA},
  publisher    = {Association for Computing Machinery},
}
</code></pre>
<p><a href="publications.html">üìù publications index</a></p>
</section>
</section>
</body>
</html>
